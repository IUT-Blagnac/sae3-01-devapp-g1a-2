= Documentation Technique Java
:icons: font
:models: models
:experimental:
:incremental:
:numbered:
:toc: macro
:window: _blank
:correction!:

toc::[]

== Présentation de l'application

L'application Java servira d'interface avec l'utilisateur (dans notre cas, les administrateurs Noskia) pour paramétrer le fichier de configuration qui sera lu par le programme Python. L'utilisateur pourra paramétrer les types de données récupérées par les capteurs, la fréquence des données du capteur, la valeur des seuils d'alertes par type de donnée. + 

L'application Java permettra aussi d'afficher en temps réel les valeurs des dernières données reçues.

== Use case Global
``Use case :``

Voici l'use case global de l'application java : 

image::./images/useCaseGlobal.png[Images use case global]


Cette application ne contient aucun système de compte. L'application ne sera utilisé que par les admnistrateur et employé Noskia.

``Spécificités :``

Les administrateurs Noskia pourront avoir accès à deux fonctionnalités : la configuration du programme qui se charge de récupérer les données émises par les capteurs et l'affichage de ces données ::
*Configuration de l'application de récupération de données :* L'administrateur pourra choisir quel type de données il veut récupérer, à quelle fréquence et à quel seuil ces derniers lancerons une alerte. +
*Affichage des données:*  Les données seront affichées par salle. L'affichage des données se fera via un diagramme en bâton. De plus, une partie de la page d'affichage des données sera réservée

== Architecture

=== Architecture générale des sous-systèmes

``Sous-système python :`` + 
Le sous-sytème de l'application python est composé de 4 fichiers. Le fichier config.ini, le fichier app.py, le fichier data.json et le fichier alarmes.txt. Voici comment ces différent fichier intéragisse entre eux :

image::./images/sousSysPthon.png[Images sous-sytèmes python]

Le rôle du fichier _config.ini_ est d'enregistrer la configuration du programme python, cette dernière sera réalisé via l'application Java. Une page sera dédié à la configuration des types de données récupérées par les capteurs, de la fréquence des données du capteur, de la valeur des seuils d'alertes par type de donnée. Le programme Java va donc écrire dans fichier le paramétrage rentré par l'utilisateurs.

Les fichiers _data.json_ et _alarmes.txt_ vont être lu par le programme Java pour pouvoir afficher leur contenu graphiquement. Leurs rôles est de stocker les informations envoyé par l'application python.

``Sous-système des pages :`` +
Le sous-sytèmes des pages correspond à la partie View (V) du MVC(Model, View, Controller). Voici comment ce sous-sytème fonctionne : 

image::./images/sousSysPage.png[Images du sous-sytème des pages]

Voici comment fonctionne l'affichage de chaque page. Pour chaque page, un fichier _.fxml_ lui est attribué. Ce dernier contiendra tout les éléments qui sont affiché sur la page. +
Ensuite, à cette page sera reliée un fichier _.css_ qui permettra de styliser certain de la page pour améliorer le design de cette dernière. + 
Et pour finir, chaque page aura un contrôler de vue. Ce dernier permettra de gérer l'affichage de la page. Par exemple, le contrôler de vue pourra afficher dynamiquement les éléments de la page, associer l'intéraction d'un élément de la page avec un évènement ou encore actualiser l'affichage de certaine partie de la page.

=== Ressources externes utilisées

``Intéraction avec un fichier .ini : ``

Nous avons utilisé l'API ini4j pour pouvoir communiquer avec un fichier .ini depuis un programme python 

Lien : :: 
* Vers la documentation , cliquez https://jar-download.com/artifacts/org.ini4j/ini4j/0.5.4/documentation[ici] +
* Pour pouvoir télécharger le fichier jar, cliquez https://talend-update.talend.com/nexus/content/repositories/libraries/org/ini4j/ini4j/0.5.1/ini4j-0.5.1.jar[ici] +

``Intéraction avec un fichier .json : ``

=== Structuration en package de l'application 

Nous avons donc choisi de structurer notre application en 3 partie afin de réaliser un MVC 

image::./images/packageApp.png[Images des packages de l'application]

``PARTIE Controller (en rouge) : `` :: 
Cette partie du projet contiendra tous les fichiers de gestion de dialogue entre la partie Model et la partie View. Ces contrôleurs serviront principalement à faire dialoguer les différentes parties du projet entre elles. +
Par exemple, si la page qui affiche les données (se situant dans la partie View) veut interagir avec le programme Python (pour par exemple récupérer de nouvelles données), elle devra faire appel à son contrôler de gestion de dialogues attitrés dans le package Controller. + 
Voici les fichiers que contient ce package : 

image::./images/packageController.png[Images du package controller]

Description des classes : ::
*FichierConfig.java :* le contrôleur de dialogues de la page de paramétrage du fichier de configuration. +
*NoskiaMainFrame.java :* le contrôleur de dialogues de la page principale (= d'accueil) de l'application.

``PARTIE View (en bleu) : `` ::
La partie View du projet sera composé de toute les vues ou pages de l'application. Elle comportera aussi tout les contrôleurs des vues. Ce package servira globalement à afficher correctement les éléments des différentes pages de l'application.

image::./images/packageView.png[Images du package view]

Description des classes : ::
*FichierConfigPane.fxml* le fichier de la vue de la page de paramétrage du fichier de configuration de l'application python et *FichierConfigController.java* le contrôleur de cette vue. + 
*NoskiaMainFramePane* le fichier de la vue de la page principale de l'application, *NoskiaMainFramePane.css* le fichier qui permet de styliser la vue et *NoskiaMainFrameController* le contrôler de la vue.

``PARTIE Model (en vert) : `` ::
La dernière partie du projet sera la partie Model. Cette dernière contiendra l'application python ainsi que les différent fichier nécessaire à son bon fonctionnement. +
Elle contiendra aussi la classe qui permettra d'intéragir avec l'application python et ses différents composants, pour par exemple récupérer les données du fichier de configuration (.ini) +

image::./images/packageModel.png[Images du package model]

Desription des classes : ::
``Package model.data : `` contient les différents fichiers en lien avec l'application python : *app.py* l'appplication python, *config.ini* le fichier de configuration de l'application python, *data.json* le fichier de données qui sera incrémenté par l'application python et *alarmes.txt* le fichier qui contiendra toute les alarmes +
``Package model.orm : ``permettra d'intéragir avec l'application pyton : *accesAppPython.java* permettra d'utiliser l'application python.

=== Structure récurrente de code

Voici la politique de développement que respecte notre application.

image::./images/foncionnementGlobal.png[Images du package model]

La partie _vue_ de l'application ne pourra pas avoir à la partie model de l'application. Si la vue à besoin d'information venant du _package model_, il faut qu'il passe par la partie _controller_. Cette dernière va se charger de faire communiquer la partie _vue_ et _model_

== Installation

=== Pour le développement

=== Pour l'utilisateur

== Explication des fonctionalités

=== Actualisation de l'affichage des données avec thread

image::./images/foncActualisationAffichageDonneeThread.png[Images de la fonctionnalité d'acutalisation des données avec thread]



